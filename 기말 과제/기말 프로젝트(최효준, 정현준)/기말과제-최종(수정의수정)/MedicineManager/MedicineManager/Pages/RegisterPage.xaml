<Page x:Class="MedicineManager.Pages.RegisterPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="RegisterPage">

    <Grid Background="White" Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Grid Grid.Row="0" Margin="0,0,0,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="60"/>
                <ColumnDefinition Width="60"/>
            </Grid.ColumnDefinitions>
            <TextBox x:Name="SearchBox" Grid.Column="0" Margin="0,0,10,0"
                     VerticalContentAlignment="Center" FontSize="14"
                     TextChanged="SearchBox_TextChanged" />
            <Button Grid.Column="1" Content="추가" Margin="0,0,5,0" Click="AddBtn_Click"/>
            <Button Grid.Column="2" Content="제거" Click="DelBtn_Click"/>
        </Grid>

        <Border Grid.Row="1" Background="#EEE" CornerRadius="5" Margin="0,0,0,5" Padding="5">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="150"/>
                    <ColumnDefinition Width="80"/>
                    <ColumnDefinition Width="100"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="40"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0" Text="제품명 ▼" FontWeight="Bold" Cursor="Hand" 
                           VerticalAlignment="Center" Padding="5,0"
                           MouseLeftButtonDown="SortByName_Click"/>

                <TextBlock Grid.Column="1" Text="종류 ▼" FontWeight="Bold" Cursor="Hand" 
                           VerticalAlignment="Center" Padding="5,0"
                           MouseLeftButtonDown="SortByType_Click"/>

                <TextBlock Grid.Column="2" Text="유통기한 ▼" FontWeight="Bold" Cursor="Hand" 
                           VerticalAlignment="Center" Padding="5,0"
                           MouseLeftButtonDown="SortByDate_Click"/>

                <TextBlock Grid.Column="4" Text="선택" FontWeight="Bold" 
                           VerticalAlignment="Center" HorizontalAlignment="Center" FontSize="11"/>
            </Grid>
        </Border>

        <ListView x:Name="MedicineListView" Grid.Row="2" 
                  MouseDoubleClick="MedicineListView_MouseDoubleClick"
                  BorderBrush="LightGray" BorderThickness="1">

            <ListView.ItemContainerStyle>
                <Style TargetType="ListViewItem">
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding IsExpired}" Value="True">
                            <Setter Property="Background" Value="#FFE6E6"/>
                        </DataTrigger>
                    </Style.Triggers>
                    <Setter Property="Padding" Value="10,5"/>
                    <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                </Style>
            </ListView.ItemContainerStyle>

            <ListView.ItemTemplate>
                <DataTemplate>
                    <Grid VerticalAlignment="Center">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="150"/>
                            <ColumnDefinition Width="80"/>
                            <ColumnDefinition Width="100"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock Grid.Column="0" Text="{Binding Name}" 
                                   FontWeight="Bold" FontSize="15" VerticalAlignment="Center"/>

                        <TextBlock Grid.Column="1" Text="{Binding Type}" 
                                   Foreground="Gray" VerticalAlignment="Center"/>

                        <TextBlock Grid.Column="2" Text="{Binding ExpiryDate, StringFormat=yyyy-MM-dd}" 
                                   Foreground="Gray" VerticalAlignment="Center"/>

                        <CheckBox Grid.Column="4" IsChecked="{Binding IsChecked}" 
                                  VerticalAlignment="Center"/>
                    </Grid>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>
    </Grid>
</Page>